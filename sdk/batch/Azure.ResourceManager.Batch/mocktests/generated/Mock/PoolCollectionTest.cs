// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using System.Collections.Generic;
using System.Net;
using System.Threading.Tasks;
using Azure.Core.TestFramework;
using Azure.ResourceManager.Batch.Tests.Mock;
using Azure.ResourceManager.Batch.Tests.Mock.Models;
using Azure.ResourceManager.TestFramework;

namespace Azure.ResourceManager.Batch.Tests.Mock.Tests.Mock
{
    /// <summary> Test for Pool. </summary>
    public partial class PoolCollectionMockTests : MockTestBase
    {
        public PoolCollectionMockTests(bool isAsync) : base(isAsync, RecordedTestMode.Record)
        {
            ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) => true;
            Environment.SetEnvironmentVariable("RESOURCE_MANAGER_URL", $"https://localhost:8443");
        }

        [RecordedTest]
        public async Task CreateOrUpdate()
        {
            // Example: CreatePool - Custom Image
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Id = "/subscriptions/subid/resourceGroups/networking-group/providers/Microsoft.Compute/galleries/testgallery/images/testimagedef/versions/0.0.1",
                    }, nodeAgentSkuId: "batch.node.ubuntu 18.04"),
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate2()
        {
            // Example: CreatePool - Full CloudServiceConfiguration
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                DisplayName = "my-pool-name",
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    CloudServiceConfiguration = new Batch.Tests.Mock.Models.CloudServiceConfiguration(osFamily: "4")
                    {
                        OsVersion = "WA-GUEST-OS-4.45_201708-01",
                    },
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    FixedScale = new Batch.Tests.Mock.Models.FixedScaleSettings()
                    {
                        ResizeTimeout = TimeSpan.Parse("PT8M"),
                        TargetDedicatedNodes = 6,
                        TargetLowPriorityNodes = 28,
                        NodeDeallocationOption = Batch.Tests.Mock.Models.ComputeNodeDeallocationOption.TaskCompletion,
                    },
                },
                InterNodeCommunication = Batch.Tests.Mock.Models.InterNodeCommunicationState.Enabled,
                NetworkConfiguration = new Batch.Tests.Mock.Models.NetworkConfiguration()
                {
                    SubnetId = "/subscriptions/subid/resourceGroups/rg1234/providers/Microsoft.Network/virtualNetworks/network1234/subnets/subnet123",
                    PublicIPAddressConfiguration = new Batch.Tests.Mock.Models.PublicIPAddressConfiguration()
                    {
                        Provision = Batch.Tests.Mock.Models.IPAddressProvisioningType.UserManaged,
                    },
                },
                TaskSlotsPerNode = 13,
                TaskSchedulingPolicy = new Batch.Tests.Mock.Models.TaskSchedulingPolicy(nodeFillType: Batch.Tests.Mock.Models.ComputeNodeFillType.Pack),
                StartTask = new Batch.Tests.Mock.Models.StartTask()
                {
                    CommandLine = "cmd /c SET",
                    UserIdentity = new Batch.Tests.Mock.Models.UserIdentity()
                    {
                        AutoUser = new Batch.Tests.Mock.Models.AutoUserSpecification()
                        {
                            Scope = Batch.Tests.Mock.Models.AutoUserScope.Pool,
                            ElevationLevel = Batch.Tests.Mock.Models.ElevationLevel.Admin,
                        },
                    },
                    MaxTaskRetryCount = 6,
                    WaitForSuccess = true,
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate3()
        {
            // Example: CreatePool - Full VirtualMachineConfiguration
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Publisher = "MicrosoftWindowsServer",
                        Offer = "WindowsServer",
                        Sku = "2016-Datacenter-SmallDisk",
                        Version = "latest",
                    }, nodeAgentSkuId: "batch.node.windows amd64")
                    {
                        WindowsConfiguration = new Batch.Tests.Mock.Models.WindowsConfiguration()
                        {
                            EnableAutomaticUpdates = false,
                        },
                        LicenseType = "Windows_Server",
                        DiskEncryptionConfiguration = new Batch.Tests.Mock.Models.DiskEncryptionConfiguration(),
                        NodePlacementConfiguration = new Batch.Tests.Mock.Models.NodePlacementConfiguration()
                        {
                            Policy = Batch.Tests.Mock.Models.NodePlacementPolicyType.Zonal,
                        },
                        OsDisk = new Batch.Tests.Mock.Models.OSDisk()
                        {
                            EphemeralOSDiskSettings = new Batch.Tests.Mock.Models.DiffDiskSettings()
                            {
                                Placement = "CacheDisk",
                            },
                        },
                    },
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    AutoScale = new Batch.Tests.Mock.Models.AutoScaleSettings(formula: "$TargetDedicatedNodes=1")
                    {
                        EvaluationInterval = TimeSpan.Parse("PT5M"),
                    },
                },
                NetworkConfiguration = new Batch.Tests.Mock.Models.NetworkConfiguration()
                {
                    EndpointConfiguration = new Batch.Tests.Mock.Models.PoolEndpointConfiguration(inboundNatPools: new List<Batch.Tests.Mock.Models.InboundNatPool>()
{
new Batch.Tests.Mock.Models.InboundNatPool(name: "testnat",protocol: Batch.Tests.Mock.Models.InboundEndpointProtocol.TCP,backendPort: 12001,frontendPortRangeStart: 15000,frontendPortRangeEnd: 15100),}),
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate4()
        {
            // Example: CreatePool - Minimal CloudServiceConfiguration
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    CloudServiceConfiguration = new Batch.Tests.Mock.Models.CloudServiceConfiguration(osFamily: "5"),
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    FixedScale = new Batch.Tests.Mock.Models.FixedScaleSettings()
                    {
                        TargetDedicatedNodes = 3,
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate5()
        {
            // Example: CreatePool - Minimal VirtualMachineConfiguration
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Publisher = "Canonical",
                        Offer = "UbuntuServer",
                        Sku = "18.04-LTS",
                        Version = "latest",
                    }, nodeAgentSkuId: "batch.node.ubuntu 18.04"),
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    AutoScale = new Batch.Tests.Mock.Models.AutoScaleSettings(formula: "$TargetDedicatedNodes=1")
                    {
                        EvaluationInterval = TimeSpan.Parse("PT5M"),
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate6()
        {
            // Example: CreatePool - No public IP
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Id = "/subscriptions/subid/resourceGroups/networking-group/providers/Microsoft.Compute/galleries/testgallery/images/testimagedef/versions/0.0.1",
                    }, nodeAgentSkuId: "batch.node.ubuntu 18.04"),
                },
                NetworkConfiguration = new Batch.Tests.Mock.Models.NetworkConfiguration()
                {
                    SubnetId = "/subscriptions/subid/resourceGroups/rg1234/providers/Microsoft.Network/virtualNetworks/network1234/subnets/subnet123",
                    PublicIPAddressConfiguration = new Batch.Tests.Mock.Models.PublicIPAddressConfiguration()
                    {
                        Provision = Batch.Tests.Mock.Models.IPAddressProvisioningType.NoPublicIPAddresses,
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate7()
        {
            // Example: CreatePool - Public IPs
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Id = "/subscriptions/subid/resourceGroups/networking-group/providers/Microsoft.Compute/galleries/testgallery/images/testimagedef/versions/0.0.1",
                    }, nodeAgentSkuId: "batch.node.ubuntu 18.04"),
                },
                NetworkConfiguration = new Batch.Tests.Mock.Models.NetworkConfiguration()
                {
                    SubnetId = "/subscriptions/subid/resourceGroups/rg1234/providers/Microsoft.Network/virtualNetworks/network1234/subnets/subnet123",
                    PublicIPAddressConfiguration = new Batch.Tests.Mock.Models.PublicIPAddressConfiguration()
                    {
                        Provision = Batch.Tests.Mock.Models.IPAddressProvisioningType.UserManaged,
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate8()
        {
            // Example: CreatePool - UserAssignedIdentities
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                Identity = new Batch.Tests.Mock.Models.BatchPoolIdentity(type: Batch.Tests.Mock.Models.PoolIdentityType.UserAssigned),
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Publisher = "Canonical",
                        Offer = "UbuntuServer",
                        Sku = "18.04-LTS",
                        Version = "latest",
                    }, nodeAgentSkuId: "batch.node.ubuntu 18.04"),
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    AutoScale = new Batch.Tests.Mock.Models.AutoScaleSettings(formula: "$TargetDedicatedNodes=1")
                    {
                        EvaluationInterval = TimeSpan.Parse("PT5M"),
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task CreateOrUpdate9()
        {
            // Example: CreatePool - VirtualMachineConfiguration Extensions
            string poolName = "testpool";
            Batch.Tests.Mock.PoolData parameters = new Batch.Tests.Mock.PoolData()
            {
                VmSize = "STANDARD_D4",
                DeploymentConfiguration = new Batch.Tests.Mock.Models.DeploymentConfiguration()
                {
                    VirtualMachineConfiguration = new Batch.Tests.Mock.Models.VirtualMachineConfiguration(imageReference: new Batch.Tests.Mock.Models.ImageReference()
                    {
                        Publisher = "Canonical",
                        Offer = "0001-com-ubuntu-server-focal",
                        Sku = "20_04-lts",
                    }, nodeAgentSkuId: "batch.node.ubuntu 20.04"),
                },
                ScaleSettings = new Batch.Tests.Mock.Models.ScaleSettings()
                {
                    AutoScale = new Batch.Tests.Mock.Models.AutoScaleSettings(formula: "$TargetDedicatedNodes=1")
                    {
                        EvaluationInterval = TimeSpan.Parse("PT5M"),
                    },
                },
            };
            string ifMatch = null;
            string ifNoneMatch = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.CreateOrUpdateAsync(true, poolName, parameters, ifMatch, ifNoneMatch);
        }

        [RecordedTest]
        public async Task Get()
        {
            // Example: GetPool
            string poolName = "testpool";

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.GetAsync(poolName);
        }

        [RecordedTest]
        public async Task Get2()
        {
            // Example: GetPool - VirtualMachineConfiguration Extensions
            string poolName = "testpool";

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await collection.GetAsync(poolName);
        }

        [RecordedTest]
        public async Task GetAll()
        {
            // Example: ListPool
            int? maxresults = null;
            string select = null;
            string filter = null;

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await foreach (var _ in collection.GetAllAsync(maxresults, select, filter))
            {
            }
        }

        [RecordedTest]
        public async Task GetAll2()
        {
            // Example: ListPoolWithFilter
            int? maxresults = null;
            string select = "properties/allocationState,properties/provisioningStateTransitionTime,properties/currentDedicatedNodes,properties/currentLowPriorityNodes";
            string filter = "startswith(name, 'po') or (properties/allocationState eq 'Steady' and properties/provisioningStateTransitionTime lt datetime'2017-02-02')";

            var batchAccountId = Batch.Tests.Mock.BatchAccount.CreateResourceIdentifier("00000000-0000-0000-0000-000000000000", "default-azurebatch-japaneast", "sampleacct");
            var collection = GetArmClient().GetBatchAccount(batchAccountId).GetPools();
            await foreach (var _ in collection.GetAllAsync(maxresults, select, filter))
            {
            }
        }
    }
}
